---
bck_service: &bck_service
  memory: 1G
  health-check-type: port
  #  health-check-type: http
  #  health-check-http-endpoint: /manage/health
  routes:
#  - route: gatewayservice.cfapps.aws.pcfapps.org
  - route: gatewayservice.apps.internal
  env:
    SPRING_PROFILES_ACTIVE: cloud
    SPRING_RABBITMQ_ADDRESSES: ${vcap.services.event-bus.credentials.uri}
    SPRING_RABBITMQ_SSL_ENABLED: ${vcap.services.event-bus.credentials.ssl}
    SPRING_RABBITMQ_SSL_ALGORITHM: TLSv1.2
  services:
  - service-registry
  - config-server
  - circuit-breaker
  - event-bus
  - cache-service
  metadata:
    annotations:
      contact: "jigsheth@pivotal.io"
    labels:
      demo: sfdc
      app: gatewayservice
applications:
  - name: gatewayservice
    path: gatewayService/target/gatewayService.jar
#    random-route: true
    <<: *bck_service
